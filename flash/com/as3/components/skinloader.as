/*================================================== * @className           wysiwygeditor.as * @version             3.0 * @package             as3 * @author              barrytan<20962493@qq.com> * @copyright           tansoft.net====================================================类说明:类模板====================================================*/package com.as3.components{	import flash.display.Stage;	import flash.events.MouseEvent;	import flash.display.StageAlign;	import flash.display.StageScaleMode;	import flash.display.StageDisplayState;	import flash.display.Sprite;	import flash.display.BitmapData;	import flash.events.Event;	import flash.system.Capabilities;	import flash.utils.clearInterval;	import flash.utils.getTimer;	import flash.system.Security;	import flash.utils.clearInterval;	import flash.utils.setInterval;	import flash.text.TextField;	import flash.text.TextFormat;	import com.as3.net.urlloader.AS3URLLoader;	import com.as3.utils.*;	import com.as3.ui.AS3Skin;	import flash.ui.Mouse;	import flash.display.Bitmap;	public class skinloader extends Sprite	{		private var _info:Object;		private var _skin:AS3Skin;		public function skinloader()		{			Security.allowDomain("*");			Security.allowInsecureDomain("*");			this.addEventListener(Event.ADDED_TO_STAGE, onAddStage);		}		private function onAddStage(event : Event) : void		{			this.removeEventListener(Event.ADDED_TO_STAGE, onAddStage);			stage.showDefaultContextMenu = false;			//stage.doubleClickEnabled = true;			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.align = StageAlign.TOP_LEFT;			_info = new Object();			_skin = new AS3Skin({parent:this});			addEventListener(AS3Skin.EVENT_SKINSTATE, skinInfoHandler);			addEventListener(AS3Event.BUTTON_CLICK, btnHandler);			addEventListener(AS3Event.SLIDER_SEEK, sliderHandler);			addEventListener(AS3Event.SLIDER_PREVIEW, sliderHandler);			stage.addEventListener(Event.RESIZE, onResizeHandler);			//testcode			testloader_txt.text="mainskin.swf";			testloader_mc.addEventListener(MouseEvent.CLICK, function(evt:MouseEvent):void{				_skin.load(testloader_txt.text);				setChildIndex(testloader_mc,numChildren-1);});		}		private function onResizeHandler(event : Event) : void		{			_skin.resize(stage.stageWidth,stage.stageHeight);		}		private function skinInfoHandler(e : AS3Event) : void		{			switch(e.obj.id) {				case "loadinfo":					if (e.obj.info == "success"){						//testcode						setChildIndex(testloader_txt,numChildren-1);						setChildIndex(testloader_mc,numChildren-1);						//add rule here or implement setSkinThings function in the skin						/*							package							{								import flash.display.Sprite;								import com.as3.ui.AS3Skin;								public class mainskin extends Sprite {									public function setSkinThings(_skin:AS3Skin) {										_skin.addStatic("logo_mc",{cy:0,cx:0},0,0);									}								}							}						*/						//_skin.addStatic("logo_mc",{cy:0,cx:0},0,0);						//_skin.addButton("play_btn",{y:-26},0);						//_skin.addObject(_video,"video_mc",{z:0},0,0,false,{cy:-27});						//_skin.addText("wmarktxt_mc",{y:-95,x:-180},-1,-1,0xFFFFFF,"微软雅黑",12);						//_skin.addObjectEventListener("wmarktxt_mc",MouseEvent.CLICK,onUserClick);						//_skin.addSlider("pos_mc",{y:-16,z:0},50,-1,0,true,-225,-1);						//_skin.addSlider("volume_mc",{x:-63,y:-112,z:0},-1,100,10,false,-1,-1);						//_skin.addObjectEventListener("mute_btn",MouseEvent.MOUSE_MOVE,muteOverHandler);						//_volumeMc=_skin.getObject("volume_mc");						onResizeHandler(null);						trace("skin ready");					} else {						trace("skin failed");					}					break;				default:					trace("unknown skin event:"+e.obj.id);			}		}		private function btnHandler(e : AS3Event) : void		{			//switch(e.obj.id)			trace("btn: " +e.obj.id);		}		private function sliderHandler(e : AS3Event) : void		{			//if (e.obj.id=="pos_mc") seek(e.obj.info);			trace("evt:"+e.type+",id:"+e.obj.id+",info:"+e.obj.info);		}	}}